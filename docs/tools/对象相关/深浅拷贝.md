# 深/浅拷贝

## 01-概述

- 浅拷贝：只是复制了对象属性或数组元素本身（只是引用地址值）
- 深拷贝：不止复制了对象属性或数组元素本身，还复制了指向的对象

## 02-浅拷贝

1. 实现方法一

   ```js
   // 利用ES6语法：...扩展运算符
   export function clone1(target){
    if(target !== null && typeof target == 'object'){
           if(target instanceof Array){
               return [...target]
           }else{
               return {...target}
           }
       }else{
           return target
       }
   }
   ```
   
2. 实现方法二

   ```js
   // 利用ES5语法：for...in
   export function clone2(target){
       if(target !== null && typeof target == 'object'){
           const cloneTarget = Array.isArray(target) ? [] : {}
           for(let key in target){
               if(target.hasOwnProperty(key)){
                   cloneTarget[key] = target[key]
               }
           }
           return cloneTarget
       }else{
           return target
       }
   }
   ```

## 03-深拷贝

1. 实现方法

   ```js
   export function deepClone(target,map = new Map()){
       if(target !== null && typeof target == 'object'){
           // 从缓存容器中读取克隆对象
           let cloneTarget = map.get(target)
           // 如果存在，返回前面克隆的缓存对象
           if(cloneTarget){
               return cloneTarget
           }
           
           // 创建克隆对象
           cloneTarget = target instanceof Array ? [] : {}
           // 缓存到map中
           map.set(target,cloneTarget)
           
           for(let key in target){
               if(target.hasOwnProperty(key)){
                   // 递归调用，深度克隆对象，且存入缓存容器map
                   cloneTarget[key] = deepClone(target[key],map)
               }
           }
           
           return cloneTarget
       }else{
           return target
       }
   }
   ```

   

